{"version":3,"sources":["./$_lazy_route_resources|lazy|groupOptions: {}|namespace object","./src/app/all-chats/all-chats.component.html","./src/app/all-chats/all-chats.component.ts","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/audio-message/audio-message.component.html","./src/app/audio-message/audio-message.component.ts","./src/app/call/call.component.ts","./src/app/call/call.component.html","./src/app/change-call-volume/change-call-volume.component.ts","./src/app/change-call-volume/change-call-volume.component.html","./src/app/chat/chat.component.ts","./src/app/chat/chat.component.html","./src/app/delete-message-content/delete-message-content.component.ts","./src/app/delete-message-content/delete-message-content.component.html","./src/app/loader/loader.component.ts","./src/app/loader/loader.component.html","./src/app/login/login.component.ts","./src/app/login/login.component.html","./src/app/modal-window/modal-window.component.ts","./src/app/modal-window/modal-window.component.html","./src/app/models/api.model.ts","./src/app/page-not-found/page-not-found.component.ts","./src/app/page-not-found/page-not-found.component.html","./src/app/posts/posts.component.ts","./src/app/posts/posts.component.html","./src/app/register/register.component.html","./src/app/register/register.component.ts","./src/app/services/api.service.ts","./src/app/services/chat.service.ts","./src/app/services/posts.service.ts","./src/app/services/user.service.ts","./src/app/services/websockets.service.ts","./src/app/take-call/take-call.component.ts","./src/app/take-call/take-call.component.html","./src/app/upload-files/upload-files.component.ts","./src/app/upload-files/upload-files.component.html","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 8255;\nmodule.exports = webpackEmptyAsyncContext;","<div class=\"container all_chats\">\n  <form class=\"container row all_chats__search_form\">\n    <div class=\"container row all_chats__search_form__container\"><span><svg xmlns=\"http://www.w3.org/2000/svg\" [attr.width]=\"31\" [attr.height]=\"31\" viewBox=\"0 0 24 24\"><path\n      [attr.fill]=\"'#525252'\"\n      d=\"M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z\"/></svg></span><input\n      class=\"form__item\" style=\"width: 100%\" [placeholder]=\"'Поиск...'\"></div>\n  </form>\n  <ul aria-label=\"All chats container\" class=\"container all_chats__list\">\n    <li style=\"width: 100%\" *ngFor=\"let c of chats\">\n      <a [routerLink]=\"'/chat'\" [queryParams]=\"{id: c.id}\" aria-label=\"All chats container item\"\n         class=\"container row all_chats__list__item\">\n        <div class=\"container all_chats__item__info\">\n          <ng-container *ngFor=\"let u of c.users\">\n            <div *ngIf=\"user && u.id !== user.id\"\n                 class=\"container all_chats__item__user_info\">{{u.first_name + \" \" + u.last_name}}</div>\n          </ng-container>\n          <div\n            class=\"container all_chats__item__last_message\">{{c.chat_messages[c.chat_messages.length - 1] && c.chat_messages[c.chat_messages.length - 1].body}}</div>\n        </div>\n      </a>\n    </li>\n  </ul>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport {ChatService} from \"../services/chat.service\";\nimport {IChat} from \"../models/chat.model\";\nimport {IUser} from \"../models/account.model\";\nimport {UserService} from \"../services/user.service\";\n\n@Component({\n  selector: 'app-all-chats',\n  templateUrl: './all-chats.component.html',\n  styleUrls: ['./all-chats.component.css']\n})\nexport class AllChatsComponent implements OnInit {\n\n  user: IUser | null = null\n  chats: IChat[] = []\n\n  constructor(private _chatService: ChatService, private _userService: UserService) {}\n\n  ngOnInit(): void {\n    this._chatService.getAllChats().subscribe(data => {\n      this.chats = data.chats\n    })\n\n    this._userService.getAuthUser().subscribe(data => {\n      this.user = data.user\n    })\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {PostsComponent} from \"./posts/posts.component\";\nimport {PageNotFoundComponent} from \"./page-not-found/page-not-found.component\";\nimport {LoginComponent} from \"./login/login.component\";\nimport {RegisterComponent} from \"./register/register.component\";\nimport {ChatComponent} from \"./chat/chat.component\";\nimport {AllChatsComponent} from \"./all-chats/all-chats.component\";\n\nconst routes: Routes = [\n  {path: 'posts', component: PostsComponent},\n  {path: 'login', component: LoginComponent},\n  {path: 'register', component: RegisterComponent},\n  {path: 'all_chats', component: AllChatsComponent},\n  {path: 'chat', component: ChatComponent},\n  {path: '**', component: PageNotFoundComponent},\n]\n\n@NgModule({\n  imports:[\n    RouterModule.forRoot(routes, {enableTracing: true}),\n  ],\n  exports: [\n    RouterModule,\n  ]\n})\nexport class AppRoutingModule {\n}\n","import {\n  AfterContentChecked,\n  AfterContentInit, AfterViewChecked,\n  AfterViewInit,\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges\n} from '@angular/core';\nimport {UserService} from \"./services/user.service\";\nimport {IUser} from \"./models/account.model\";\nimport {animate, state, style, transition, trigger} from \"@angular/animations\";\nimport {ActivatedRoute, NavigationStart, Router} from \"@angular/router\";\nimport {ChatComponent} from \"./chat/chat.component\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n  animations: [\n    trigger('openClose', [\n      state('open', style({transform: 'none'})),\n      state('close', style({transform: 'scaleY(0)'})),\n      transition('close <=> open', animate(100))\n    ])\n  ],\n})\nexport class AppComponent implements OnInit, AfterViewInit, AfterContentInit, AfterContentChecked, AfterViewChecked {\n  constructor(private userService: UserService, private router: Router, private r: ActivatedRoute) {\n    this.r.queryParams.subscribe(params => {\n      let username = params['user']\n      if (username) {\n        this.userService.getAuthUser().subscribe(data => {\n          this.user = data.user\n        })\n      }\n    });\n  }\n\n  public user: IUser | null = null\n  public isOpen = false\n\n  ngOnInit() {\n    this.userService.getAuthUser().subscribe(data => {\n      this.user = data.user\n      if (!data.user) this.router.navigateByUrl('/login')\n      // else this.router.navigateByUrl('/posts')\n    })\n\n  }\n\n  ngAfterViewInit() {\n\n  }\n\n  ngAfterViewChecked() {\n\n  }\n\n  ngAfterContentInit() {\n\n  }\n\n  ngAfterContentChecked() {\n\n  }\n\n  openOrClose(isOpen: boolean) {\n    this.isOpen = isOpen\n  }\n\n  logout(ev: MouseEvent): void {\n    this.userService.logoutUser().subscribe(data => {\n      console.log(data.result)\n    })\n    this.userService.getAuthUser().subscribe(data => {\n      this.user = data.user\n    })\n    this.router.navigateByUrl('login')\n  }\n\n}\n","<div class=\"main\">\n  <nav class=\"navbar\">\n    <div class=\"navbar__item_container\">\n      <a class=\"navbar__item\" routerLink=\"/posts\">Posts</a>\n      <a class=\"navbar__item\" routerLink=\"/all_chats\">Chats</a>\n    </div>\n    <div class=\"navbar__item_container\">\n      <div class=\"navbar__submenu\" *ngIf=\"user\">\n        <a class=\"navbar__item\" routerLink=\"/posts\" (mouseenter)=\"openOrClose(true)\" (mouseleave)=\"openOrClose(false)\">{{user.username}}</a>\n        <aside class=\"submenu\" [@openClose]=\"isOpen ? 'open' : 'close'\" (mouseenter)=\"openOrClose(true)\" (mouseleave)=\"openOrClose(false)\">\n          <a class=\"submenu__item\" routerLink=\"/posts\">{{\"Настройки\"}}</a>\n          <button class=\"submenu__item\" (click)=\"logout($event)\">{{\"Выйти\"}}</button>\n        </aside>\n      </div>\n    </div>\n  </nav>\n  <router-outlet></router-outlet>\n\n</div>\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppComponent } from './app.component';\nimport { PostsComponent } from './posts/posts.component';\nimport {HttpClientModule} from \"@angular/common/http\";\nimport { PageNotFoundComponent } from './page-not-found/page-not-found.component';\nimport {AppRoutingModule} from \"./app-routing.module\";\nimport { LoginComponent } from './login/login.component';\nimport {BrowserAnimationsModule} from \"@angular/platform-browser/animations\";\nimport {FormsModule} from \"@angular/forms\";\nimport { LoaderComponent } from './loader/loader.component';\nimport { RegisterComponent } from './register/register.component';\nimport { ChatComponent } from './chat/chat.component';\nimport {Subject} from \"rxjs\";\nimport { ModalWindowComponent } from './modal-window/modal-window.component';\nimport { DeleteMessageContentComponent } from './delete-message-content/delete-message-content.component';\nimport { AllChatsComponent } from './all-chats/all-chats.component';\nimport {NgAudioRecorderModule} from \"ng-audio-recorder\";\nimport { AudioMessageComponent } from './audio-message/audio-message.component';\nimport { UploadFilesComponent } from './upload-files/upload-files.component';\nimport { CallComponent } from './call/call.component';\nimport { TakeCallComponent } from './take-call/take-call.component';\nimport { ChangeCallVolumeComponent } from './change-call-volume/change-call-volume.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    PostsComponent,\n    PageNotFoundComponent,\n    LoginComponent,\n    LoaderComponent,\n    RegisterComponent,\n    ChatComponent,\n    ModalWindowComponent,\n    DeleteMessageContentComponent,\n    AllChatsComponent,\n    AudioMessageComponent,\n    UploadFilesComponent,\n    CallComponent,\n    TakeCallComponent,\n    ChangeCallVolumeComponent,\n\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    AppRoutingModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    NgAudioRecorderModule,\n  ],\n  providers: [\n    Subject\n  ],\n  bootstrap: [\n    AppComponent,\n  ]\n})\nexport class AppModule { }\n","<audio #KjlKdD [src]=\"src\" [controls]=\"true\" style=\"display: none\"></audio>\n<div class=\"container row\" *ngIf=\"audio\" style=\"height: 30px;align-items: center\">\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" *ngIf=\"!play\" (click)=\"playAudio($event)\" fill=\"currentColor\" [attr.color]=\"'#221fe5'\"\n       style=\"background: #FFF; width: 30px;border-radius: 50%;padding-left: 2px\">\n    <path [attr.fill]=\"'#221fe5'\"\n          d=\"M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z\"/>\n  </svg>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" *ngIf=\"play\" (click)=\"pauseAudio($event)\" fill=\"currentColor\" [attr.color]=\"'#221fe5'\"\n       style=\"background: #FFF; width: 30px;border-radius: 50%;padding-left: 2px\" viewBox=\"0 0 16 16\">\n    <path d=\"M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z\"/>\n  </svg>\n  <svg *ngIf=\"!loading\" xmlns=\"http://www.w3.org/2000/svg\" class=\"audio_progress\"\n       style=\"height: 6px; width: 250px; margin-left: 10px\">\n    <line class=\"audio_progress__line\" y1=\"3\" y2=\"3\" x1=\"0\" x2=\"250\" [attr.stroke]=\"'#909090'\" style=\"z-index: 10\"/>\n    <line class=\"audio_progress__line\" y1=\"3\" y2=\"3\" x1=\"0\"\n          [attr.x2]=\"currentTime / duration * 250\" [attr.stroke]=\"'#b5ff7a'\"\n          style=\"z-index: 20\"/>\n  </svg>\n  <small *ngIf=\"play\">{{currentTime + ' / ' + duration}}</small>\n  <small *ngIf=\"!play\">{{duration}}</small>\n</div>\n","import {Component, ElementRef, Input, OnInit, ViewChild} from '@angular/core';\n\n@Component({\n  selector: 'app-audio-message',\n  templateUrl: './audio-message.component.html',\n  styleUrls: ['./audio-message.component.css']\n})\nexport class AudioMessageComponent implements OnInit {\n  @Input() src?: string\n\n  @ViewChild(\"KjlKdD\", {static: true}) audio?: ElementRef<HTMLAudioElement>\n\n  play: boolean = false\n  loading: boolean = true\n\n  currentTime: number = 0\n  duration: number = 1\n\n  constructor() { }\n\n  ngOnInit(): void {\n    if(this.audio) {\n      this.audio.nativeElement.ondurationchange = () => {\n        this.duration = this.audio!.nativeElement.duration\n        console.log(this.duration)\n      }\n      this.audio.nativeElement.onloadedmetadata = (e) => {\n        this.duration = this.audio!.nativeElement.duration\n        console.log(this.duration)\n        this.loading = false\n      }\n      this.audio.nativeElement.onended = (e) => {\n        this.play = false\n        if(this.audio) this.audio.nativeElement.currentTime = 0\n      }\n    }\n  }\n\n  playAudio(ev: MouseEvent) {\n    ev.stopPropagation()\n    if(this.audio) {\n      console.log('playing...')\n      this.audio.nativeElement.ontimeupdate = (e) => {\n        this.currentTime = this.audio?.nativeElement.currentTime || 0\n      }\n      this.play = true\n      this.audio && this.audio.nativeElement.play()\n    }\n  }\n\n  pauseAudio(ev: MouseEvent) {\n    ev.stopPropagation()\n    if(this.audio) {\n      this.audio.nativeElement.pause()\n      this.play = false\n    }\n  }\n}\n","import {AfterContentInit, AfterViewInit, Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild} from '@angular/core';\nimport { IUser } from '../models/account.model';\nimport {ChatService} from \"../services/chat.service\";\n\n@Component({\n  selector: 'app-call',\n  templateUrl: './call.component.html',\n  styleUrls: ['./call.component.css']\n})\nexport class CallComponent implements OnInit, AfterViewInit {\n  @ViewChild(\"localVideo\", {static: false}) localVideo?: ElementRef<HTMLVideoElement>\n\n  private remotePeers: { [sid: number]: RTCPeerConnection } = {}\n  private gainNode?: GainNode\n\n  @Input() sid: number = -1\n  @Input() isOpen: boolean = false\n  @Input() meetingName: string = \"\"\n  @Input() user: IUser | null = null\n\n  @Output() onexit = new EventEmitter<any>()\n  // current other id of peer connection\n  otherSid: number = -1\n  // other ids of peer connections\n  otherSids: number[] = []\n  videoEnabled: boolean = false\n  audioEnabled: boolean = false\n  localStream?: MediaStream\n  remoteStreams: { id: number, username: string, stream: MediaStream }[] = []\n  lastStreamId: string = ''\n\n  constructor(private _chatService: ChatService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit() {\n    this._chatService.connectToCalls()\n    this.callHandle()\n    this._chatService.calls.next({event: \"call-connect\", sid: this.sid, data: {}})\n  }\n\n  callHandle() {\n    if (this.localVideo) {\n      this.getUserMediaStream({audio: !this.audioEnabled, video: !this.videoEnabled}).then(() => {\n        this.localVideo!.nativeElement.play().catch(e => {\n          console.log(e.message)\n        })\n      }).catch(e => {\n        console.log(e.message)\n      })\n    }\n    this.call().then(() => {\n      this._chatService.calls.subscribe(async data => {\n        await this.subscribeToWSConnection(data)\n      })\n    })\n  }\n\n  stopCall(sid?: number) {\n    if (!sid) {\n      this._chatService.calls.next({event: \"call-disconnect\", sid: this.sid, data: {}})\n    }\n    this.remotePeers[sid || this.sid].close()\n    if(!sid) {\n      this.localStream?.getTracks().forEach(t => {\n        t.stop()\n      })\n      this.onexit.emit()\n      if(this.localVideo) this.localVideo.nativeElement.srcObject = null\n    }\n    else {\n      let r = this.remoteStreams\n      const el = r.find(i => i.id === sid)\n      if (el) {\n        const id = r.indexOf(el)\n        r.splice(id, 1)\n        this.remoteStreams = r\n      }\n    }\n  }\n\n  setEnabled(stream: \"audio\" | \"video\", enabled: boolean) {\n    this.enable(stream, enabled)\n  }\n\n  private enable(stream: \"audio\" | \"video\", enabled: boolean) {\n    const isAllEnabled = (stream === \"audio\" && this.videoEnabled && enabled) || (stream === \"video\" && this.audioEnabled && enabled)\n\n    if (this.localStream) {\n      if (!isAllEnabled) {\n        if(stream === \"audio\") this.audioEnabled = enabled\n        else if (stream === \"video\") this.videoEnabled = enabled\n      } else {\n        this.audioEnabled = true\n        this.videoEnabled = true\n      }\n      this.getUserMediaStream({video: !this.videoEnabled, audio: isAllEnabled ? true : !this.audioEnabled}).then((s) => {\n        if (isAllEnabled) {\n          this.localStream!.getTracks().forEach(t => {\n            t.stop()\n          })\n        }\n        this.localVideo!.nativeElement.srcObject = this.localStream!\n        this.call().catch(e => {\n          console.log(e.name + '\\n' + e.message)\n        })\n      }).catch(e => {\n        console.log(e.name + '\\n' + e.message)\n      })\n    }\n  }\n\n  private async getUserMediaStream(mediaConstrains: MediaStreamConstraints): Promise<MediaStream> {\n    const isStart = !!this.localStream\n    const stream = await navigator.mediaDevices.getUserMedia(mediaConstrains)\n\n    let audioContext = new AudioContext()\n    this.gainNode = audioContext.createGain()\n    let audioSource = audioContext.createMediaStreamSource(stream)\n    let audioDestination = audioContext.createMediaStreamDestination()\n    audioSource.connect(this.gainNode)\n    this.gainNode.connect(audioDestination)\n\n    stream.removeTrack(stream.getAudioTracks()[0])\n    stream.addTrack(audioDestination.stream.getAudioTracks()[0])\n\n    console.log(stream.getAudioTracks())\n\n    this.gainNode.gain.value = 0\n\n    this.localStream = stream\n    this.localVideo!.nativeElement.srcObject = this.localStream\n    isStart && this.localVideo!.nativeElement.play()\n    return stream\n  }\n\n  private async call(): Promise<void> {\n    \n\n    !this.remotePeers[this.sid] && this.createPeerConnection()\n\n    if (this.localStream && this.remotePeers[this.sid]) {\n      this.localStream.getTracks().length > 0 && this.localStream.getTracks().forEach(track => {\n        this.remotePeers[this.sid]?.addTrack(track, this.localStream!)\n        console.log({track})\n      })\n      try {\n        const offer: RTCSessionDescriptionInit = await this.remotePeers[this.sid].createOffer({\n          offerToReceiveAudio: true,\n          offerToReceiveVideo: true,\n        })\n        await this.remotePeers[this.sid].setLocalDescription(offer)\n        this._chatService.calls.next({event: \"offer\", data: offer, sid: this.sid})\n      } catch (e) {\n        console.error(e)\n      }\n    }\n  }\n\n  private createPeerConnection() {\n    let peerConnection = new RTCPeerConnection()\n    this.remotePeers[this.sid] = this.setPeerCallbacks(peerConnection, this.sid)\n  }\n\n  private setPeerCallbacks(peer: RTCPeerConnection, sid: number) {\n    peer.onicecandidate = (e) => {\n      if (e.candidate) {\n        this._chatService.calls.next({\n          event: 'ice-candidate',\n          data: e.candidate,\n          sid: sid\n        })\n      }\n    }\n    peer.ontrack = (e) => {\n      const mediaStream = e.streams[0]\n      if (e.streams[0].id === this.lastStreamId) {\n        let s = this.remoteStreams.find(i => i.stream.id === this.lastStreamId)\n        s && this.remoteStreams.splice(this.remoteStreams.indexOf(s), 1)\n      } else {\n        this.lastStreamId = e.streams[0].id\n      }\n      this.otherSids.forEach(id => {\n        const s = this.remoteStreams.find(i => i.id === id)\n        s && this.remoteStreams.splice(this.remoteStreams.indexOf(s), 1)\n      })\n      this.remoteStreams.push({id: this.otherSid, username: this.user?.username || \"\", stream: mediaStream})\n    }\n    peer.onconnectionstatechange = (e) => {\n    }\n    return peer\n  }\n\n  private async offerHandle(data: any) {\n    if (data.sid !== this.sid) {\n      this.otherSid = data.sid\n      if (!this.remotePeers[data.sid]) this.remotePeers[data.sid] = this.setPeerCallbacks(new RTCPeerConnection({'iceServers': [{'urls': 'stun:stun.l.google.com:19302'}]}), data.sid)\n      this.remotePeers[data.sid].setRemoteDescription(new RTCSessionDescription(data.data)).then(async () => {\n        const answer = await this.remotePeers[data.sid].createAnswer()\n        await this.remotePeers[data.sid].setLocalDescription(answer)\n        this._chatService.calls.next({\n          event: 'answer',\n          sid: data.sid,\n          data: answer\n        })\n      })\n    }\n    this.otherSids.push(data.sid)\n  }\n\n  private async subscribeToWSConnection(data: any) {\n    switch (data.event) {\n      case \"call-connect\": {\n        this.call()\n        break\n      }\n      case \"call-disconnect\": {\n        this.stopCall(data.sid)\n        break\n      }\n      case \"offer\": {\n        await this.offerHandle(data)\n        break\n      }\n      case 'ice-candidate': {\n        // add ICE candidate to added peer conection\n        await this.remotePeers[data.sid]?.addIceCandidate(new RTCIceCandidate(data.data)).catch(e => {\n          console.log(e.name + '\\n' + e.message)\n        })\n        break\n      }\n      case 'answer': {\n        if (data.sid === this.sid && this.remotePeers[data.sid]) {\n          // create new peer connection\n          let sd = new RTCSessionDescription(data.data)\n          // add this in remote peers connections\n          await this.remotePeers[data.sid].setRemoteDescription(sd)\n        }\n        break\n      }\n      default:\n        console.log(\"ERROR! Unresolved event\")\n    }\n  }\n\n}\n","<div class=\"container call_container\">\n    <div class=\"call_container__header\">\n        <div class=\"call__container__header__title\">{{meetingName}}</div>\n        <div class=\"call__container__header__users_count\">{{remoteStreams.length + 1 + \" пользователей\"}}</div>\n    </div>\n    <video #localVideo [autoplay]=\"true\"></video>\n    <div class=\"container remote_videos_container\">\n        <div class=\"container row\" *ngFor=\"let r of remoteStreams\">\n            <div style=\"color: #FFF;position: absolute; bottom: 5px; font-size: 13px;\">{{r.username}}</div>\n            <video [srcObject]=\"r.stream\" [autoplay]=\"true\"></video>\n        </div>\n    </div>\n    <div class=\"container row call_container__manage_panel\">\n        <div class=\"container call_container__manage_panel__container\">\n            <button class=\"call_container__button call_container__button__ok\" (click)=\"setEnabled('audio', !audioEnabled)\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" *ngIf=\"audioEnabled\">\n            <path [attr.fill]=\"'#fff'\"\n                  d=\"M10.5,3.73a2,2,0,0,1,2.95-.14A2,2,0,0,1,14,5V8.41a1,1,0,0,0,2,0V5A4,4,0,0,0,9,2.47,1,1,0,1,0,10.5,3.73Zm8.22,9.54.2,0a1,1,0,0,0,1-.81A7.91,7.91,0,0,0,20,11a1,1,0,0,0-2,0,5.54,5.54,0,0,1-.11,1.1A1,1,0,0,0,18.72,13.27Zm3,6.06-18-18a1,1,0,0,0-1.42,0,1,1,0,0,0,0,1.41L8,8.48V11a4,4,0,0,0,6,3.46l1.46,1.46A6,6,0,0,1,6,11a1,1,0,0,0-2,0,8,8,0,0,0,7,7.93V21H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2H13V18.93a7.87,7.87,0,0,0,3.85-1.59l3.4,3.4a1,1,0,0,0,1.42-1.41ZM12,13a2,2,0,0,1-2-2v-.52l2.45,2.46A1.74,1.74,0,0,1,12,13Z\"/>\n          </svg>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" *ngIf=\"!audioEnabled\">\n            <path xmlns=\"http://www.w3.org/2000/svg\" [attr.fill]=\"'#fff'\"\n                  d=\"M12,15a4,4,0,0,0,4-4V5A4,4,0,0,0,8,5v6A4,4,0,0,0,12,15ZM10,5a2,2,0,0,1,4,0v6a2,2,0,0,1-4,0Zm10,6a1,1,0,0,0-2,0A6,6,0,0,1,6,11a1,1,0,0,0-2,0,8,8,0,0,0,7,7.93V21H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2H13V18.93A8,8,0,0,0,20,11Z\"/>\n          </svg>\n        </button>\n            <button class=\"call_container__button call_container__button__ok\" (click)=\"setEnabled('video', !videoEnabled)\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" *ngIf=\"!videoEnabled\">\n            <path [attr.fill]=\"'#fff'\"\n                  d=\"M21.53,7.15a1,1,0,0,0-1,0L17,8.89A3,3,0,0,0,14,6H5A3,3,0,0,0,2,9v6a3,3,0,0,0,3,3h9a3,3,0,0,0,3-2.89l3.56,1.78A1,1,0,0,0,21,17a1,1,0,0,0,.53-.15A1,1,0,0,0,22,16V8A1,1,0,0,0,21.53,7.15ZM15,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V9A1,1,0,0,1,5,8h9a1,1,0,0,1,1,1Zm5-.62-3-1.5V11.12l3-1.5Z\"/>\n          </svg>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" *ngIf=\"videoEnabled\">\n            <path [attr.fill]=\"'#fff'\"\n                  d=\"M7.71,6.29h0l-4-4A1,1,0,0,0,2.29,3.71L4.62,6A3,3,0,0,0,2,9v6a3,3,0,0,0,3,3h9a3,3,0,0,0,1.9-.69l4.39,4.4a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM14,16H5a1,1,0,0,1-1-1V9A1,1,0,0,1,5,8H6.59l7.87,7.88A1,1,0,0,1,14,16Zm7.53-8.85a1,1,0,0,0-1,0L17,8.89A3,3,0,0,0,14,6H12.66a1,1,0,0,0,0,2H14a1,1,0,0,1,1,1v1.5h0a1.62,1.62,0,0,0,0,.19.65.65,0,0,0,.05.2h0s.05.06.07.1a1,1,0,0,0,.15.21s.1.06.15.1l.17.11a.85.85,0,0,0,.23,0,.7.7,0,0,0,.14,0h0a1.62,1.62,0,0,0,.19,0,.65.65,0,0,0,.2-.05h0L20,9.62v5.72a1,1,0,1,0,2,0V8A1,1,0,0,0,21.53,7.15Z\"/>\n          </svg>\n        </button>\n            <button class=\"call_container__button call_container__button__err\" (click)=\"stopCall()\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path [attr.fill]=\"'#fff'\" d=\"M4,12a1,1,0,0,0,1,1h7.59l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l4-4a1,1,0,0,0,.21-.33,1,1,0,0,0,0-.76,1,1,0,0,0-.21-.33l-4-4a1,1,0,1,0-1.42,1.42L12.59,11H5A1,1,0,0,0,4,12ZM17,2H7A3,3,0,0,0,4,5V8A1,1,0,0,0,6,8V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V19a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V16a1,1,0,0,0-2,0v3a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V5A3,3,0,0,0,17,2Z\"/>\n            </svg>\n          </button>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-change-call-volume',\n  templateUrl: './change-call-volume.component.html',\n  styleUrls: ['./change-call-volume.component.css']\n})\nexport class ChangeCallVolumeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>change-call-volume works!</p>\n","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {UserService} from \"../services/user.service\";\nimport {ChatService} from \"../services/chat.service\";\nimport {IUser} from \"../models/account.model\";\nimport {IChat, IMessage, IMessageCreate} from \"../models/chat.model\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {interval} from \"rxjs\";\nimport {take, takeWhile} from \"rxjs/operators\";\nimport {NgAudioRecorderService, OutputFormat} from \"ng-audio-recorder\";\n\nexport type statusComponentType =\n  | \"reading\"\n  | \"edit\"\n  | \"delete\"\n  | \"forward\"\n  | \"reply\"\n\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.css']\n})\nexport class ChatComponent implements OnInit, AfterViewInit {\n\n  @ViewChild('chatBody', {static: false}) chatBody?: ElementRef<HTMLDivElement>\n  chatId: number = -1\n  reader: IUser | null = null\n  user: IUser | null = null\n  chat: IChat | null = null\n  otherUser: IUser | undefined = this.chat?.users.filter(i => i.id !== this.user?.id)[0]\n  selectedMessages: IMessage[] = []\n  isLoading: boolean = false\n  editBody: string = \"\"\n  isCheck: true | null = null\n  isRecording: boolean = false\n  callIsOpen: boolean = false\n  audio?: any\n  status?: statusComponentType\n  message: IMessageCreate = {\n    user: this.user?.id ? this.user?.id : -1,\n    chat: this.chat?.id ? this.chat?.id : -1,\n    body: \"\",\n    date: (new Date()).toDateString(),\n  }\n\n  constructor(\n    private _route: ActivatedRoute,\n    private _userService: UserService,\n    private _chatService: ChatService,\n    private _audioRecorderService: NgAudioRecorderService\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.subscribeToMessage()\n    this._route.queryParams.subscribe(p => {\n      this.chatId = parseInt(p['id'])\n      this.message.chat = parseInt(p['id'])\n    })\n\n    this._userService.getAuthUser().subscribe(data => {\n      this.user = data.user\n      if (data.user) this.message.user = data.user?.id\n    })\n\n    this._chatService.message.next({event: \"get_chat\", id: this.chatId})\n\n    interval(2000)\n      .pipe(takeWhile((i) => {\n        return true\n      }))\n      .subscribe(i => {\n        if (this.reader) this.reader = null\n      })\n  }\n\n  submit() {\n    this.isLoading = true\n    this.message.date = new Date().toDateString()\n    if (this.status === 'edit') this.edit()\n    else if (this.status === 'reply') this.reply()\n    else this._chatService.message.next({event: \"send_message\", ...this.message})\n    this.message.body = \"\"\n  }\n\n  exitCall() {\n    this.callIsOpen = false\n  }\n\n  read() {\n    this._chatService.message.next({event: \"reading_message\"})\n  }\n\n  edit() {\n    this.selectedMessages[0].body = this.editBody\n    this._chatService.message.next({event: \"edit_message\", message: this.selectedMessages[0]})\n  }\n\n  delete() {\n    this.isLoading = true\n    let ids = this.selectedMessages.map(i => {\n      return i.id\n    })\n    this._chatService.message.next({event: 'delete_message', messages: JSON.stringify(ids), for_all: this.isCheck})\n  }\n\n  forward(id: number, chatId: number) {\n  }\n\n  reply() {\n    this._chatService.message.next({event: \"reply_message\", message: this.message, pk: this.selectedMessages[0].id})\n  }\n\n  call() {\n    this.callIsOpen = true\n  }\n\n  stopCall() {\n    this.callIsOpen = false\n  }\n\n  select(id: number) {\n    if (this.chat) {\n      let m = this.chat.chat_messages.find(i => i.id === id)\n      if (m) {\n        let idx = this.selectedMessages.indexOf(m)\n        if (idx > -1) this.selectedMessages.splice(idx, 1)\n        else this.selectedMessages.push(m)\n      }\n    }\n  }\n\n  checkMessageIsSelect(id: number): boolean {\n    if (this.chat) {\n      let m = this.chat.chat_messages.find(i => i.id === id)\n      if (m) {\n        let idx = this.selectedMessages.indexOf(m)\n        return idx > -1;\n      }\n    }\n    return false\n  }\n\n  checkPossibleMethods(): Array<{ text: string, status: statusComponentType, method: (...args: any[]) => void }> {\n    let defaultValues: Array<{ text: string, status: statusComponentType, method: (...args: any[]) => void }> = [\n      {\n        text: \"Редактировать\",\n        status: \"edit\",\n        method: this.edit\n      },\n      {\n        text: \"Удалить\",\n        status: \"delete\",\n        method: this.delete\n      },\n      {\n        text: \"Переслать\",\n        status: \"forward\",\n        method: this.forward\n      },\n      {\n        text: \"Ответить\",\n        status: \"reply\",\n        method: this.reply\n      }\n    ]\n    let ms = this.selectedMessages\n    if (ms.length === 0) return []\n    else if (ms.length === 1 && ms[0].user === this.user?.id) return defaultValues\n    else if (ms.length === 1 && ms[0].user !== this.user?.id) return [defaultValues[1], defaultValues[2], defaultValues[3]]\n    else if (ms.length > 1) return [defaultValues[1], defaultValues[2]]\n    else return []\n  }\n\n  setComponentStatus(status?: statusComponentType) {\n    if (status === 'edit') this.editBody = this.selectedMessages[0].body\n    this.status = status\n  }\n\n  check() {\n    this.isCheck = !this.isCheck ? true : null\n  }\n\n  ngAfterViewInit() {\n  }\n\n  startRecording() {\n    this.isRecording = true\n    this._audioRecorderService.startRecording();\n  }\n\n  stopRecording() {\n    this.isRecording = false\n    this._audioRecorderService.stopRecording(OutputFormat.WEBM_BLOB).then((output) => {\n      let f = new FormData()\n      f.append('audio', output)\n      this._chatService.uploadAudioMessage(f).subscribe(data => {\n        console.log(data)\n        this.message.audio_message = data.audio\n        this.submit()\n        this.message.audio_message = undefined\n      })\n    }).catch(errorCase => {\n      console.log(errorCase)\n    });\n  }\n\n  resetRecording() {\n    this.isRecording = false\n    this._audioRecorderService.stopRecording(OutputFormat.WEBM_BLOB).then(out => {\n    })\n  }\n\n  private getChatHandle(data: any) {\n    this.chat = data.chat\n    this.otherUser = this.chat?.users.filter(i => i.id !== this.user?.id)[0]\n    if (this.chatBody && this.chat) this.chatBody.nativeElement.scrollTop = this.chatBody.nativeElement.scrollHeight\n  }\n\n  private sendChatHandle(data: any) {\n    this.chat && this.chat.chat_messages.push(data.message)\n    if (this.chatBody) interval(100).pipe(take(2)).subscribe(i => {\n      this.chatBody!.nativeElement.scrollTop = this.chatBody!.nativeElement.scrollHeight\n    })\n  } \n\n  private editMessageHandle(data: any) {\n    if (this.chat) {\n      let m = this.chat.chat_messages.find(i => i.id === data['message'].id)\n      if (m) {\n        m.body = data['message'].body\n      }\n    }\n  } \n\n  private deleteMessageHandle(data: any) {\n    if (this.chat) {\n      this.chat.chat_messages = this.chat?.chat_messages.filter(i => data.ids.indexOf(i.id) === -1)\n      this.selectedMessages = []\n    }\n  }\n\n  subscribeToMessage() {\n    this._chatService.message.subscribe((data) => {\n      switch (data.event) {\n        case 'get_chat': {\n          this.getChatHandle(data)\n          break\n        }\n        case 'send_message': {\n          this.sendChatHandle(data)\n          break\n        }\n        case 'reading_message': {\n          this.reader = data.reader\n          break\n        }\n        case 'edit_message': {\n          this.editMessageHandle(data)\n          break\n        }\n        case 'delete_message': {\n          this.deleteMessageHandle(data)\n        }\n      }\n      this.isLoading = false\n    })\n  }\n\n}\n","<app-modal-window *ngIf=\"status && status === 'delete'\" [header]=\"status.toUpperCase()\" [status]=\"status\" (onclose)=\"setComponentStatus()\" (oncheck)=\"check()\" (oncallback)=\"delete()\"></app-modal-window>\n<app-call *ngIf=\"callIsOpen\" (onexit)=\"exitCall()\" [user]=\"user\" [meetingName]=\"otherUser?.username || ''\" [sid]=\"user?.id || -1\"></app-call>\n<div aria-label=\"Chat\" class=\"chat\">\n    <div class=\"chat__header\" aria-label=\"Chat header\" *ngIf=\"chat && otherUser\">\n        <div style=\"display: flex; flex-direction: column; align-items: center\" *ngIf=\"selectedMessages.length == 0\">\n            <div>{{otherUser.username}}</div>\n            <div>{{reader && user && reader.id !== user.id ? \"writing...\" : \"online\"}}</div>\n        </div>\n        <button class=\"form__button call_container__button\" style=\"width: auto;height: auto;margin:0;padding: 5px 5px 0 5px;\" (click)=\"call()\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"width: 23px;height: 23px\">\n            <path \n              [attr.fill]=\"'#6563ff'\" \n              d=\"M20,12a1,1,0,0,0-1-1H11.41l2.3-2.29a1,1,0,1,0-1.42-1.42l-4,4a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l4,4a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L11.41,13H19A1,1,0,0,0,20,12ZM17,2H7A3,3,0,0,0,4,5V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V16a1,1,0,0,0-2,0v3a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V8a1,1,0,0,0,2,0V5A3,3,0,0,0,17,2Z\"/>\n          </svg>\n        </button>\n        <div style=\"display: flex; flex-direction: row\" *ngIf=\"selectedMessages.length > 0 && chat\">\n            <div style=\"display: flex; flex-direction: row; align-items: center; justify-content: center\">\n                <div style=\"font-size: 25px\">{{\"Selected \" + selectedMessages.length + ' / ' + chat.chat_messages.length}}</div>\n                <div class=\"chat__header__button_group\">\n                    <button *ngFor=\"let i of checkPossibleMethods()\" (click)=\"setComponentStatus(i.status)\">{{i.text}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"chat__body\" aria-label=\"Chat body\" *ngIf=\"chat\" id=\"chatBody\">\n        <ul class=\"chat__messages_container\" #chatBody>\n            <ng-container *ngFor=\"let m of chat.chat_messages\">\n                <li class=\"chat__messages_container__item\" *ngIf=\"m.is_remove === false || (m.is_remove === null && m.user !== this.user?.id)\" [ngClass]=\"{'chat__messages_container__item__left': otherUser && otherUser.id !== m.user, 'chat__messages_container__item__right': otherUser && otherUser.id === m.user, 'chat__messages_container__item__select': checkMessageIsSelect(m.id || -1)}\"\n                    (click)=\"select(m.id || -1)\">\n                    <div class=\"chat__messages_container__item__message\">\n                        <div class=\"container chat__messages_container__item__reply_message\" *ngIf=\"m.reply_to_message\">\n                            <audio *ngIf=\"m.reply_to_message.audio_message\" [src]=\"m.reply_to_message.audio_message.audio\"></audio>\n                            <div>{{m.reply_to_message.body}}</div>\n                            <small>{{m.reply_to_message.date | date:\"HH:mm\"}}</small>\n                        </div>\n                        <app-audio-message *ngIf=\"m.audio_message\" [src]=\"m.audio_message.audio\"></app-audio-message>\n                        <div class=\"chat__messages_container__item__body\">{{m.body}}</div>\n                        <small class=\"chat__messages_container__item__date\">{{m.date | date:\"HH:mm\"}}</small>\n                    </div>\n                </li>\n            </ng-container>\n        </ul>\n    </div>\n    <div class=\"container row status_text_container\" *ngIf=\"status === 'edit'\">\n        <div>Редактирование сообщения</div>\n        <div style=\"font-size: 22px; cursor: pointer;\" (click)=\"setComponentStatus()\">&times;</div>\n    </div>\n    <div class=\"container row status_text_container\" *ngIf=\"status === 'reply'\">\n        <div>Ответить на сообщение</div>\n        <div style=\"font-size: 22px; cursor: pointer;\" (click)=\"setComponentStatus()\">&times;</div>\n    </div>\n    <form class=\"chat_form\" (ngSubmit)=\"submit()\" #chatForm=\"ngForm\" aria-label=\"Chat footer\">\n        <div class=\"chat_form__container\">\n            <audio [src]=\"audio\"></audio>\n            <div class=\"container row\">\n                <div class=\"container\">\n                    <input *ngIf=\"!status || status === 'reply'\" class=\"chat__from_input\" name=\"body\" [(ngModel)]=\"message.body\" (ngModelChange)=\"read()\">\n                    <input *ngIf=\"status === 'edit'\" class=\"chat__from_input\" name=\"body\" [(ngModel)]=\"editBody\" (ngModelChange)=\"read()\" style=\"border-radius: 0 0 10px 10px\">\n                </div>\n                <div class=\"container row chat_form__buttons_container\">\n                    <button type=\"button\" (click)=\"startRecording()\" *ngIf=\"!isRecording\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path [attr.fill]=\"'#6563ff'\"\n                    d=\"M12,15a4,4,0,0,0,4-4V5A4,4,0,0,0,8,5v6A4,4,0,0,0,12,15ZM10,5a2,2,0,0,1,4,0v6a2,2,0,0,1-4,0Zm10,6a1,1,0,0,0-2,0A6,6,0,0,1,6,11a1,1,0,0,0-2,0,8,8,0,0,0,7,7.93V21H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2H13V18.93A8,8,0,0,0,20,11Z\"/>\n            </svg>\n          </button>\n                    <button type=\"button\" *ngIf=\"isRecording\" (click)=\"stopRecording()\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"30\" height=\"30\">\n              <path [attr.fill]=\"'#6563ff'\"\n                    [attr.d]=\"'M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z'\"/>\n            </svg>\n          </button>\n                    <button (click)=\"resetRecording()\" type=\"button\" *ngIf=\"isRecording\">&times;</button>\n                </div>\n                <button class=\"form__button chat_form__button\">{{isLoading ? \"Loading...\" : \"Send\"}}</button>\n            </div>\n        </div>\n    </form>\n    <div *ngIf=\"status === 'reply'\" class=\"container reply_message_container\">\n        <div>{{selectedMessages[0].body}}</div>\n        <small>{{selectedMessages[0].date | date:\"HH:mm\"}}</small>\n    </div>\n</div>","import {Component, OnInit, Output, EventEmitter} from '@angular/core';\n\n@Component({\n  selector: 'app-delete-message-content',\n  templateUrl: './delete-message-content.component.html',\n  styleUrls: ['./delete-message-content.component.css']\n})\nexport class DeleteMessageContentComponent implements OnInit {\n\n  @Output() check = new EventEmitter()\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  checkDeleteForAll: true | null = null\n\n  setCheckDeleteForAll() {\n    this.checkDeleteForAll = this.checkDeleteForAll ? null : true\n    this.check.emit()\n  }\n}\n","<div class=\"checker_container\">\n  <div (click)=\"setCheckDeleteForAll()\"\n       [ngClass]=\"{'check_mark': !checkDeleteForAll, 'fill_check_mark': checkDeleteForAll}\">\n    <svg style=\"width: 20px; height: 20px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n      <path [attr.fill]=\"checkDeleteForAll ? '#fff' : '#0077D7'\" [ngStyle]=\"!checkDeleteForAll ? {'opacity': 0} : {'opacity': 1}\"\n            d=\"M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z\"/>\n    </svg>\n  </div>\n\n  <div style=\"display: flex; flex-direction: row; margin-left: 5px; font-size: 20px; color: #000; align-items: center;\">\n    Удалить для всех\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-loader',\n  templateUrl: './loader.component.html',\n  styleUrls: ['./loader.component.css']\n})\nexport class LoaderComponent { }\n","Loading...\n","import {Component, Input, OnChanges, OnInit, SimpleChanges} from '@angular/core';\nimport {UserService} from \"../services/user.service\";\nimport {NgForm} from \"@angular/forms\";\nimport {Router} from \"@angular/router\";\nimport '@angular/localize/init'\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n  username: string | null = null\n  password: string | null = null\n\n  isLoading: boolean = false\n\n  errors?: any\n\n  constructor(private _userService: UserService, private _router: Router) {\n  }\n\n  ngOnInit() {\n  }\n\n  submit(loginForm: NgForm): void {\n    if (this.username && this.password) {\n      this.isLoading = true\n      this._userService.loginUser(loginForm.form.value).subscribe(data => {\n        this.errors = data.errors\n        console.log(data.errors)\n        this.isLoading = false\n        if (data.result) {\n          this._userService.getAuthUser().subscribe(data => {\n            if(data.user) this._router.navigate(['posts'], {queryParams: {'user': data.user.username}})\n            else this.errors.__all__ = ['Something was wrong... Please, try again!']\n          })\n        }\n      })\n    }\n  }\n\n}\n","<form class=\"form\" #loginForm=\"ngForm\" (ngSubmit)=\"submit(loginForm)\">\n  <span class=\"error\" style=\"border-radius: 0 0 10px 10px\" *ngIf=\"errors  && errors.__all__\">{{errors.__all__[0]}}</span>\n  <div class=\"form__title\" i18n>{{\"Login\"}}</div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Username\" name=\"username\" [(ngModel)]=\"username\" required #name=\"ngModel\">\n    <span class=\"error\" *ngIf=\"name.invalid && (name.dirty || name.touched)\">\n      <div *ngIf=\"name.errors?.required\" i18n>\n        Username is required.\n      </div>\n    </span>\n  </div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Password\" name=\"password\" [(ngModel)]=\"password\" required type=\"password\" #passwordField=\"ngModel\">\n    <span class=\"error\" *ngIf=\"passwordField.invalid && (passwordField.dirty || passwordField.touched)\">\n      <div *ngIf=\"passwordField.errors?.required\" i18n>\n        Password is required.\n      </div>\n    </span>\n  </div>\n  <button class=\"form__button\" [disabled]=\"loginForm.invalid || isLoading\" i18n *ngIf=\"!isLoading\">{{\"Login\"}}</button>\n  <button class=\"form__button\" [disabled]=\"true\" i18n *ngIf=\"isLoading\"><app-loader></app-loader></button>\n  <div>\n    <a routerLink=\"/register\">Зарегистрироваться</a>\n  </div>\n</form>\n","import {AfterViewInit, Component, EventEmitter, ElementRef, Input, OnInit, Output, ViewChild} from '@angular/core';\nimport {statusComponentType} from \"../chat/chat.component\";\n\n@Component({\n  selector: 'app-modal-window',\n  templateUrl: './modal-window.component.html',\n  styleUrls: ['./modal-window.component.css']\n})\nexport class ModalWindowComponent implements OnInit {\n\n  @Input() status?: statusComponentType\n  @Input() header?: string\n\n  @Output() onclose = new EventEmitter<any>()\n  @Output() oncheck = new EventEmitter<any>()\n  @Output() oncallback = new EventEmitter<any>()\n\n  @ViewChild('window', {static: false})\n  modalWindow?: ElementRef<HTMLDivElement>\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  close() {\n    this.onclose.emit()\n  }\n\n  check() {\n    this.oncheck.emit()\n  }\n\n  callback() {\n    this.oncallback.emit()\n  }\n}\n","<div class=\"modal_window\" aria-label=\"Modal window\">\n    <div class=\"modal_window__header\" aria-label=\"Modal window header\" *ngIf=\"close && header\">\n        <div>{{header}}</div>\n        <div (click)=\"close()\" style=\"cursor: pointer; font-size: 30px;\">&times;</div>\n    </div>\n    <div style=\"display: flex; flex-direction: column\">\n        <div *ngIf=\"status === 'delete'\" class=\"modal_window__body\" aria-label=\"Modal window body\" #window>\n            <app-delete-message-content (check)=\"check()\"></app-delete-message-content>\n        </div>\n        <div class=\"container row\"><button (click)=\"callback()\">Удалить</button><button>Отмена</button></div>\n    </div>\n</div>","export const baseURI = \"http://127.0.0.1:8000/api/1.0/\"\r\n\r\nexport interface IResponse {\r\n  readonly result: boolean\r\n  readonly message: string\r\n  readonly errors: object | undefined\r\n}\r\n\r\nexport interface ILoginUser {\r\n  readonly username: string\r\n  readonly password: string\r\n}\r\n\r\nexport interface IRegisterUser {\r\n  readonly username: string\r\n  readonly email: string\r\n  readonly first_name: string\r\n  readonly last_name: string\r\n  readonly password1: string\r\n  readonly password2: string\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-page-not-found',\n  templateUrl: './page-not-found.component.html',\n  styleUrls: ['./page-not-found.component.css']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p><strong>Page not found (404)</strong></p>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {IPost} from \"./posts\";\nimport {PostsService} from \"../services/posts.service\";\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\nimport {IUser} from \"../models/account.model\";\nimport '@angular/localize/init'\n\n@Component({\n  selector: 'app-posts',\n  providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}],\n  templateUrl: './posts.component.html',\n  styleUrls: ['./posts.component.css'],\n})\nexport class PostsComponent implements OnInit {\n  isLoading: boolean = false\n\n  constructor(\n    private postsService: PostsService,\n  ) { }\n\n  posts: IPost[] = []\n\n  ngOnInit(): void {\n    this.isLoading = true\n    this.postsService.getPosts().subscribe(data => {\n      this.posts = data.posts\n      this.isLoading = false\n    })\n  }\n\n}\n","<div *ngIf=\"posts.length > 0\">\n  <ul *ngFor=\"let p of posts\" class=\"posts_container\">\n    <li class=\"post\">\n      <strong class=\"post__username\">{{p.user.first_name + \" \" + p.user.last_name | titlecase}}</strong>\n      <article class=\"post__body\">{{p.body}}</article>\n      <small class=\"post__date\" i18n>{{p.date | date}}</small>\n    </li>\n  </ul>\n</div>\n<div *ngIf=\"isLoading\" class=\"nothing_posts__error\" i18n>\n  <app-loader></app-loader>\n</div>\n<div *ngIf=\"posts.length === 0 && !isLoading\" class=\"nothing_posts__error\" i18n>\n  Nothing to show\n</div>\n","<form class=\"form\" #registerForm=\"ngForm\" (ngSubmit)=\"submit(registerForm)\">\n  <span class=\"error\" style=\"border-radius: 0 0 10px 10px\" *ngIf=\"errors && errors.__all__\">{{errors.__all__[0]}}</span>\n  <div class=\"form__title\" i18n>{{\"Registration\"}}</div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Username\" name=\"username\" [(ngModel)]=\"username\" required #name=\"ngModel\">\n    <span class=\"error\" *ngIf=\"name.invalid && (name.dirty || name.touched)\">\n      <div *ngIf=\"name.errors?.required\" i18n>\n        Username is required.\n      </div>\n    </span>\n  </div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Email\" name=\"email\" [(ngModel)]=\"email\" required email #emailField=\"ngModel\">\n    <span class=\"error\" *ngIf=\"emailField.invalid && (emailField.dirty || emailField.touched)\">\n      <div *ngIf=\"emailField.errors?.required\" i18n>\n        Email is required.\n      </div>\n      <div *ngIf=\"emailField.errors?.email\" i18n>\n        Email is email.\n      </div>\n    </span>\n  </div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"First name\" name=\"first_name\" [(ngModel)]=\"first_name\" required #firstName=\"ngModel\">\n    <span class=\"error\" *ngIf=\"firstName.invalid && (firstName.dirty || firstName.touched)\">\n      <div *ngIf=\"firstName.errors?.required\" i18n>\n        First name is required.\n      </div>\n    </span>\n  </div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Last name\" name=\"last_name\" [(ngModel)]=\"last_name\" required #lastName=\"ngModel\">\n    <span class=\"error\" *ngIf=\"lastName.invalid && (lastName.dirty || lastName.touched)\">\n      <div *ngIf=\"lastName.errors?.required\" i18n>\n        Last name is required.\n      </div>\n    </span>\n  </div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Password\" name=\"password1\" [(ngModel)]=\"password1\" required #password=\"ngModel\" type=\"password\">\n    <span class=\"error\" *ngIf=\"password.invalid && (password.dirty || password.touched)\">\n      <div *ngIf=\"password.errors?.required\" i18n>\n        Password is required.\n      </div>\n    </span>\n  </div>\n  <div class=\"form__item__container\">\n    <input class=\"form__item\" placeholder=\"Repeat password\" name=\"password2\" [(ngModel)]=\"password2\" required #repeatPassword=\"ngModel\" type=\"password\">\n    <span class=\"error\" *ngIf=\"repeatPassword.invalid && (repeatPassword.dirty || repeatPassword.touched)\">\n      <div *ngIf=\"repeatPassword.errors?.required\" i18n>\n        Repeat password is required.\n      </div>\n    </span>\n  </div>\n  <button class=\"form__button\" [disabled]=\"registerForm.invalid || isLoading\" i18n *ngIf=\"!isLoading\">{{\"Register\"}}</button>\n  <button class=\"form__button\" [disabled]=\"true\" i18n *ngIf=\"isLoading\"><app-loader></app-loader></button>\n</form>\n","import { Component, OnInit } from '@angular/core';\nimport {NgForm} from \"@angular/forms\";\nimport {UserService} from \"../services/user.service\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent implements OnInit {\n\n  username = \"\"\n  email = \"\"\n  first_name = \"\"\n  last_name = \"\"\n  password1 = \"\"\n  password2 = \"\"\n\n  errors?: any\n\n  isLoading = false\n\n  constructor(private _userService: UserService, private _router: Router) { }\n\n  ngOnInit(): void {\n  }\n\n  submit(registerForm: NgForm) {\n    this.isLoading = true\n    this._userService.registerUser(registerForm.form.value).subscribe(data => {\n      this.isLoading = false\n      if (data.result) this._router.navigate(['login'])\n      else this.errors = data.errors\n    })\n  }\n\n}\n","import {Injectable} from \"@angular/core\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class ApiService {\r\n  constructor(private _http: HttpClient) {\r\n  }\r\n\r\n  private _getCookie(name: string) {\r\n    let ca: Array<string> = document.cookie.split(';');\r\n    let caLen: number = ca.length;\r\n    let cookieName = `${name}=`;\r\n    let c: string;\r\n    for (let i: number = 0; i < caLen; i += 1) {\r\n      c = ca[i].replace(/^\\s+/g, '');\r\n      if (c.indexOf(cookieName) == 0) {\r\n        return c.substring(cookieName.length, c.length);\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n\r\n  public getRequest<T>(url: string) {\r\n    return this._http.get<T>(url, {\r\n      headers: {\r\n        'X-CSRFToken': this._getCookie('csrftoken'),\r\n      }\r\n    })\r\n  }\r\n\r\n  public postRequest<T>(url: string, data: object) {\r\n    return this._http.post<T>(url, data, {\r\n      headers: {\r\n        'X-CSRFToken': this._getCookie('csrftoken'),\r\n      }\r\n    })\r\n  }\r\n\r\n  public putRequest<T>(url: string, data?: object) {\r\n    return this._http.put<T>(url, data, {\r\n      headers: {\r\n        'X-CSRFToken': this._getCookie('csrftoken'),\r\n      }\r\n    })\r\n  }\r\n\r\n  public deleteRequest<T>(url: string) {\r\n    return this._http.delete<T>(url, {\r\n      headers: {\r\n        'X-CSRFToken': this._getCookie('csrftoken'),\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {IChat, IMessage} from \"../models/chat.model\";\nimport {WebsocketsService} from \"./websockets.service\";\nimport { map } from 'rxjs/operators';\nimport {ApiService} from \"./api.service\";\nimport {baseURI} from \"../models/api.model\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatService {\n\n  constructor(\n    public message: Subject<{event: string} & IMessage | {event: string} & any>,\n    public calls: Subject<{event: string, sid: number, data: any}>,\n    private wsService: WebsocketsService,\n    private _api: ApiService,\n  ) {\n    this.message = <Subject<{event: string} & IMessage | any>>wsService.connect('ws://127.0.0.1:8000/chat/').pipe(map((res): {event: string} & IMessage | {event: string} & IChat => {\n      return JSON.parse(res.data)\n    }))\n  }\n\n  getAllChats() {\n    return this._api.getRequest<{chats: IChat[]}>(baseURI + 'chats/')\n  }\n\n  uploadAudioMessage(formData: FormData) {\n    return this._api.postRequest<{audio: number}>(baseURI + 'upload_message/', formData)\n  }\n\n  connectToCalls() {\n    this.calls = <Subject<{event: string} | any>>this.wsService.connect(`ws://127.0.0.1:8000/call/${1}/`).pipe(map((res): {event: string} => {\n      return JSON.parse(res.data)\n    }))\n    return this.calls\n  }\n}\n\n\n\n","import { Injectable } from '@angular/core';\nimport {IPost} from \"../posts/posts\";\nimport {Observable, of} from \"rxjs\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {baseURI} from \"../models/api.model\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PostsService {\n  posts: IPost[] = []\n\n\n  constructor(private http: HttpClient) { }\n\n  getPosts(): Observable<{ posts: IPost[] }> {\n    return this.http.get<{ posts: IPost[] }>(baseURI + \"post/\", {})\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {IUser} from \"../models/account.model\";\nimport {Observable} from \"rxjs\";\nimport {baseURI, ILoginUser, IRegisterUser, IResponse} from \"../models/api.model\";\nimport {ApiService} from \"./api.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  private url = baseURI + 'user/'\n\n  constructor(private _api: ApiService) {\n  }\n\n  getAuthUser(): Observable<{ user: IUser | null }> {\n    return this._api.getRequest<{ user: IUser | null }>(this.url)\n  }\n\n  registerUser(data: IRegisterUser): Observable<IResponse> {\n    return this._api.postRequest<IResponse>(this.url, data)\n  }\n\n  loginUser(data: ILoginUser): Observable<IResponse> {\n    return this._api.putRequest<IResponse>(this.url, data)\n  }\n\n  logoutUser(): Observable<IResponse> {\n    return this._api.deleteRequest<IResponse>(this.url)\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {Observable, Observer, Subject} from \"rxjs\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebsocketsService {\n\n  constructor(private subject: Subject<MessageEvent>) { }\n\n  public connect(url: string): Subject<MessageEvent> {\n    console.log(\"Connecting...\")\n    if (!this.subject.observers.length) {\n      this.subject = this.create(url)\n    }\n    return this.subject\n  }\n\n  private create(url: string): Subject<MessageEvent> {\n    let ws = new WebSocket(url)\n\n\n    let observable = Observable.create((obs: Observer<MessageEvent>) => {\n      ws.onmessage = obs.next.bind(obs)\n      ws.onerror = obs.error.bind(obs)\n      ws.onclose = obs.error.bind(obs)\n      return ws.close.bind(ws)\n    })\n\n    let observer = {\n      next: (data: Object) => {\n        if (ws.readyState === WebSocket.OPEN) {\n          ws.send(JSON.stringify(data))\n        }\n        else {\n          setTimeout(() => {\n            ws.send(JSON.stringify(data))\n          }, 1000)\n        }\n      }\n    }\n\n    return Subject.create(observer, observable)\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-take-call',\n  templateUrl: './take-call.component.html',\n  styleUrls: ['./take-call.component.css']\n})\nexport class TakeCallComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"take-call\">\n    <div class=\"take-call__preview-container\">\n        <video #previewVideo></video>\n    </div>\n    <div class=\"take-call__buttons-container\">\n\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-upload-files',\n  templateUrl: './upload-files.component.html',\n  styleUrls: ['./upload-files.component.css']\n})\nexport class UploadFilesComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>upload-files works!</p>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}